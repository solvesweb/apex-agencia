---
// src/components/services/ServiceCard.astro
import { Image } from "astro:assets";
import type { Service } from "../../types/Service";
import { getLangFromUrl, useTranslations } from "../../i18n/utils";

interface Props {
    service: Service;
}

const { service } = Astro.props;
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

// Mapeo de iconos SVG
const icons: Record<string, string> = {
    representation:
        '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>',
    negotiation:
        '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>',
    legal: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"/>',
    branding:
        '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"/>',
    psychology:
        '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>',
    performance:
        '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>',
};
---

<div
    class="service-card group relative overflow-hidden rounded-2xl transition-all duration-300 hover:-translate-y-2"
>
    <!-- Imagen de fondo -->
    <div class="absolute inset-0">
        <Image
            src={service.image}
            alt={t(service.titleKey)}
            width={600}
            height={800}
            class="h-full w-full object-cover grayscale transition-all duration-500 group-hover:scale-105 group-hover:grayscale-0"
        />
    </div>

    <!-- Overlay oscuro -->
    <div
        class="absolute inset-0 bg-linear-to-t from-black/95 via-black/80 to-black/60"
    >
    </div>

    <!-- Border gradiente animado -->
    <div
        class="absolute inset-0 rounded-2xl opacity-0 transition-opacity duration-300 group-hover:opacity-100"
        style="padding: 2px; background: linear-gradient(135deg, #06b6d4, #22d3ee, #06b6d4); background-size: 200% 200%;"
    >
        <div class="h-full w-full rounded-2xl bg-transparent"></div>
    </div>

    <!-- Contenido -->
    <div class="relative z-10 p-12 flex flex-col h-full">
        <!-- Icono -->
        <div
            class="mb-6 inline-flex h-16 w-16 items-center justify-center rounded-xl bg-primary-500/20 backdrop-blur-sm text-primary-400 transition-all duration-500 group-hover:scale-110 group-hover:rotate-6 group-hover:bg-primary-500 group-hover:text-white"
        >
            <svg
                class="h-8 w-8"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                set:html={icons[service.iconKey]}
            />
        </div>

        <!-- Título -->
        <h3 class="mb-4 text-2xl font-bold text-white font-space">
            {t(service.titleKey)}
        </h3>

        <!-- Descripción -->
        <p class="text-gray-300 leading-relaxed">
            {t(service.descriptionKey)}
        </p>
    </div>
</div>

<style>
    .service-card {
        min-height: 400px;
    }

    .service-card:hover .absolute:nth-child(3) {
        animation: gradient-shift 3s ease infinite;
    }

    @keyframes gradient-shift {
        0% {
            background-position: 0% 50%;
        }
        50% {
            background-position: 100% 50%;
        }
        100% {
            background-position: 0% 50%;
        }
    }
</style>
